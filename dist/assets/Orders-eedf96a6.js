import{e as j,f as m,r as t,g as p,y as h,s as u,j as s}from"./index-130ed77d.js";const N=()=>{const[x,{isSuccess:l}]=j(),{data:d}=m();console.log(d);const[i,a]=t.useState({limit:2,skip:0}),[n,{isLoading:b,isError:f,isSuccess:o,error:v,data:c}]=p();return t.useEffect(()=>{l&&h.success("rider assign success")},[l]),t.useEffect(()=>{n(i)},[i]),t.useEffect(()=>{o&&h.success("order fetch success")},[o]),t.useEffect(()=>{u.on("place-order",()=>{n(i)})},[]),t.useEffect(()=>{u.on("status-update",()=>{n(i)})},[]),s.jsxs("div",{className:" container",children:[s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-sm-4",children:s.jsxs("select",{className:"form-select my-3 ",value:i.limit,onChange:e=>a({limit:e.target.value,skip:0}),children:[s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"15",children:"15"})]})})}),s.jsxs("div",{className:"table-responsive",children:[c&&s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Customer Name"}),s.jsx("th",{children:"Customer Mobile"}),s.jsx("th",{children:"Resturant Name"}),s.jsx("th",{children:"Resturant Mobile"}),s.jsx("th",{children:"Dish "}),s.jsx("th",{children:"Order Status"}),s.jsx("th",{children:"Rider"})]})}),s.jsx("tbody",{children:c.Orders.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.customer.name}),s.jsx("td",{children:e.customer.mobile}),s.jsx("td",{children:e.resturant.name}),s.jsx("td",{children:e.resturant.mobile}),s.jsx("td",{children:e.items.map(r=>s.jsx("div",{children:s.jsxs("div",{className:"d-block",children:[r.qty," x ",r.dish.name," x ",r.dish.price,"  "]})},r._id))}),s.jsx("td",{children:e.status}),s.jsxs("td",{children:[e.rider?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("strong",{children:e.rider.name})}),s.jsx("div",{children:s.jsx("strong",{children:e.rider.mobile})})]}):s.jsxs("select",{class:"form-select",onChange:r=>x({_id:e._id,rider:r.target.value}),children:[s.jsx("option",{selected:!0,children:"Choose Rider"}),d&&d.map(r=>s.jsx("option",{value:r._id,children:r.name},r._id))]})," "]})]},e._id))})]}),c&&[...Array(Math.ceil(c.total/i.limit))].map((e,r)=>s.jsx("button",{onClick:g=>a({...i,skip:r*i.limit}),type:"button",className:`btn btn-sm me-1  ${r*i.limit===i.skip?"btn-primary":"btn-outline-primary"} `,children:r}))]})]})};export{N as default};
